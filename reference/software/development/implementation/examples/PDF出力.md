# PDF 出力

クライアント側で出力する方法とサーバー側で出力する方法がある。
例えば、JavaScript なら`jsPDF`のようなライブラリがある。

また、どちらにも HTML から変換する方法がある。

サーバー側で HTML から変換するなら、対象のページを表示できないといけない。
Admin ユーザーのようにあらゆるページを表示できる権限を用意すると解決できる。
出力自体はヘッドレスブラウザなどでそのページを PDF として印刷する。
https://zenn.dev/moga/articles/gen-rich-pdf-with-headless-browser

JavaScript で出力すると権限周りを考えなくても済むけど、`jsPDF`ならフォントを外から与えないといけないのでフォントファイルが js に含まれて重くなってしまう。

ライブラリがページネーションに対応してないなら、1 枚ずつ出力して結合する。

印刷フォーマットの拡張は、キーで配置するパターンと位置で配置するパターンがある。
キーなら("estimate_left_top", "image.png")のように情報を持つ。
位置なら("estimate", "150px", "40px", "image.png")のように情報を持つ。

jsPDF で印刷したらプレビュー表示も同じコンポーネントを使い回せる。
フォントの問題だけはあるのでどうしたものか。

サーバー側で処理するなら、一度印刷したファイルを持ち続けて、元の情報が変更されたらファイルを一緒に破棄して作り直す。
