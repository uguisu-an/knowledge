# Object-Oriented Programming: OOP

オブジェクト指向プログラミング

手続型プログラミング、トランザクションスクリプトと対応する。

「命令」的な考え方から、「宣言」的な考え方へのパラダイムシフト。

アセンブリの時代にはプロセッサーへの「命令」という考え方で問題なかったけど、コンピューターも複雑化してそれでは足りなくなった。

OOP の本質は「オブジェクト同士の通信」であり、「通信相手を切り替えることで振る舞いを切り替えられる」ところにある。

オブジェクト指向というよりはメッセージ指向というべきだったのかもしれない。
Apple はプロトコル指向という呼び方を推してる。

オブジェクトは一種の「境界」を持っている。

クラスとインスタンスの関係だけが OOP ではない。

オブジェクト指向の根底は、Verb でなく Object を先に見せることなのかも。

OO 言語による実装と OOP は違う。

クラスは OOP というよりもスコープを整理するための機能で、OOP の本質は別にある。

クロージャがあれば、関数でも OOP は実現できる。React がやってる。

OOP の実装の前にクロージャを理解した方がいい。

オブジェクト指向の最大の特徴は算出プロパティ。
メソッドはなんらかのコルーチンではなく、算出プロパティとして扱われるべき。
つまり、内部のプロパティが変わったら、算出プロパティも一緒に変わる、という実装が宣言的な記述になる。

例えば、以下のように状態を直接書き換えるような記述は命令的。

```js
items.forEach((item) => {
    item.totalPrice = item.price * item.amount;
});
```

対して、以下のように算出プロパティとして考える記述は宣言的。
単に「各項目の合計価格は単価と数量をかけたもの」という宣言をしているかのようになっている。

```js
items.map((item) => ({ totalPrice: item.price * item.amount }));
```

このような書き方は一般的に「関数プログラミング的」と考えられているが、そうではない。
むしろ「オブジェクト指向プログラミング的」な書き方だ。

リアクティブプログラミングは OOP 言語で今までうまく表現できてなかった部分を表現できるように工夫されている。

ポインタを禁止した。

ポインタがあった時代というのは、array も一つずつポインタで値として扱うような時代だった。
そうではなく、ひとまとまりのオブジェクトとして扱うことで宣言的な記述を可能にする。

代わりに、実装を隠す「インタフェース」を用いる。

インタフェースを対象に関連づけることで、既存の手続きを呼び出すのに実装を気にしなくて良くなった。
ただ、OOP 自体の実装がまだ十分ではなく、多くの抜け道ができてしまっている。

本来目指していたのはイベント駆動、メッセージパッシングだ。
リアクティブプログラミングでかなり本来の形に近づいた。ストリームがオブジェクトの本来の姿。

「宣言的」な実装がオブジェクト指向の特徴だ。

単に「目的指向」といった方がいいかも。つまり、宣言的ということ。過程ではなく、結果や仕様を直接記述する。
