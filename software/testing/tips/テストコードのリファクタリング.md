# テストコードのリファクタリング

リファクタリングが必要になったら、ためらわない。

必要になったらリファクタリングできるように、テストを自動化する。

2 度の重複で共通化するのは早すぎる。
3 度の重複で共通化するくらいでちょうどいい。

リファクタリングの手順：

1. テストコードを確認
2. テストコードがなかったら作成
3. プロダクトコードを修正
4. テストを実行して、動作が変わらないことを確認

テストシナリオがないとリファクタリングできない。
手動テストでもいいが、シナリオは必要。

動いてないコードを綺麗にすると綺麗なゴミができる。

仕様を変更しやすいように、実装をリファクタリングする。

リファクタリングの対象は常に実装。

一時変数を作りたくなったら、関数に切り出した方がいい。

https://qiita.com/NagaokaKenichi/items/22972e6ba698c7f2978a
http://objectclub.jp/technicaldoc/refactoring/refact-smell

[２つの帽子を知る - Qiita](https://qiita.com/yoshii0110/items/987ca1451d328aa0c735)

リファクタリングのためのストラングラーパターン（二つの橋）
[DDD の腐敗防止層を用いた変更容易性向上 - READYFOR Tech Blog](https://tech.readyfor.jp/entry/2022/04/11/114603)
