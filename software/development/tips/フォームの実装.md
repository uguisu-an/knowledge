# フォームの実装

状態管理はフォームコントロールに任せて、submit した情報を外で受け取るか、そのまま API に投げて redux のようなライブラリで受け取る。

フォームは一つのコンポーネントにして、Dispatch まで任せてしまったほうがいい。
submit した時に何らかの処理が必要なら、dispatch 経由でイベントを拾う。

編集の時は defaultValues を渡して、新規の時は何も渡さずに内部で defaultValues を構築する。

フォーム単位で制御コンポーネントはめんどくさい。
フォームコントロールの中身は制御コンポーネントでもいいけど、フォームとしては非制御コンポーネントのようにする。
状態管理をフォームコントロールに任せる。

React の場合、react-hook-form などを使えば、非制御コンポーネントでも外から簡単に値を変更できる。

変更するたびに自動送信するような画面の場合、フォームというよりは、フォームコントロール一つ一つがそれ一つを持ったフォームのように考えられる。

こちらの実装例では、`<form>`ごと切り出して、`<Form />`みたいに取り込んでる。
https://github.com/vercel/virtual-event-starter-kit

`input[type=number]`は数字以外の入力自体を受け付けないので、操作する側にはわかりづらいこともある。
`input[type=text]`でとりあえず入力させて、「半角数字以外は入力できません」というようにエラーメッセージを出すのも選択肢として考えた方がいい。
react-hook-form などを使うと、valid でないなら submit できないし、string でもうまく扱ってくれる。
https://zenn.dev/funteractive/articles/component-input-number

formの入力を変更したときに、他の入力をいじる操作は極力避けた方がいい。
やっていいのはバリデーションでどうしても必要な絞り込みくらい。
