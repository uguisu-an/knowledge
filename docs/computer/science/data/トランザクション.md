# トランザクション

ビジネスロジックとしては、データだけではなく、トランザクションも考える。

ドメイン駆動開発は、データ駆動開発でもある。
業務に登場するデータの種類を洗い出して、整理して、トランザクションに合わせた集約の単位を考える。顧客の言葉で。
データベースとしてのデータではなく、業務上で取り扱う概念的なデータとして。

正規化はデータの話で、データベースだけの話ではない。

フロントエンドでトランザクションのような制御をすると、ブラウザを閉じたり、ネットワークが切れたりしたときに処理できないことがある。バックエンドで処理したほうがいい。

複雑なデータはまず枠になるデータを作ってから詳細を作る。トランザクションを分けて、途中の状態をデータベースに持つ。完成したかどうかわかるように、下書きのステータスもあった方がいい。

大きなトランザクションよりも小さなトランザクションの積み重ねで段階的にデータを作る。
