# イベントソーシング

テーブル設計の基本は「状態の記録」よりも「出来事の記録」だ。

出来事を記録すれば、ある時点の状態は導出できる。
まずはデータベースに出来事を記録する。

状態を導出しているとパフォーマンスが悪いので、更新のたびに最新の状態を算出するキャッシュのデータも用意するといい。

状態を記録するだけでは途中の状態がわからない。

状態を記録する前に、変化を記録する。

変化の記録だけあれば、状態の更新は後回しでもいい。

変化を記録する形式にしておけば、後から履歴が欲しいと言われても対応できる。逆ではできない。
