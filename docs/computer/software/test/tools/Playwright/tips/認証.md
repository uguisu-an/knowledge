いくつかの方法がある。

https://playwright.dev/docs/auth

基本はconfigでsetup用のprojectを用意して、他のprojectからsetupに依存する。

`playwright.config.ts`に`globalSetup`を設定すると、指定したファイルを起動して最初に実行できる。

```ts
export default defineConfig({
  globalSetup: require.resolve("./setup"),
  // ...
});
```

```ts
import { chromium } from "@playwright/test";

export default async function setup() {
  const browser = await chromium.launch();
  const page = await browser.newPage();
  await page.goto("http://localhost:3000/login");
  await page.getByLabel("Username").fill(process.env.USERNAME);
  await page.waitForURL("http://localhost:3000/welcome");
  await page.context().storageState({ page: "storageState.json" });
  await browser.close();
}
```
