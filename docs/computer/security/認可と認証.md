# 認可と認証

「誰に何ができるか」でアクセスが決まる。

認可 Authorization (AuthZ)
認証 Authentication (AuthN)

認可 → 何ができる？
認証 → 誰？

「なぜパスワードが必要か」
というと、
「使用する端末やアカウントを切り替えるため」だ。

認証 → あなたは誰か
認可 → あなたは何ができるか

マイクロサービスではとりあえずゲートウェイを置いて、表向きのトークンとは別に内部通信用のトークンを生成することが多いようだ。内部通信用のトークンは漏れないのでサービス間で共有してしまってもいい。
https://qiita.com/unhurried/items/998a386ccbc1ad4b8e61

マイクロサービスと新旧サービスの共存・移行の参考になる。
https://developers.freee.co.jp/entry/migrate-to-auth-microservice

認証情報はアクセストークン以外にも考えられる。Google の認証情報は JSON ファイルだし。

外部サービスにアクセスするトークンをテナントに紐づけてやれば、そのテナントの全てのユーザーが同じ外部サービスにアクセスできる。認証を解除する仕組みもあったほうがいいか。
