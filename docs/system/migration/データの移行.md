移行用にデータベースを分けるとその中だけで安全に作業できる。
あとは移動するだけ、の状態に持っていってから移行する。

一旦生のデータを一つのデータベースに取り込んだ方が処理しやすい。
あとはひたすらSELECT INSERTで加工していく。

UPDATEよりはSELECT INSERTで別テーブルに分けたほうが途中の状態を残せてデバッグしやすい。

生データや加工の段階では、本来の移行先とは別にテーブルを用意した方がいい。
ワーキングテーブルやワークテーブルと呼ぶことがある。

エラーリストやマッピングデータが多かったら、移行計画が甘かったということでもある。

ワーキングテーブルには一旦NULL許容でエラーになるものも全部入れて、目視や検索で確認する方法もある。
中間データも一旦ワーキングテーブルにINSERTしておくと経過がわかりやすい。

データを移行したらアプリケーションで想定外の挙動をするなら、仕様の想定が足りてなかったと言える。
まぁ、いくらかは想定外の問題が起きるものだ。多すぎたら計画のやり方を見直したほうがいい。

移行データが多い場合、一部のデータと業務だけを移して、できるだけ早く運用を始めた方がいい。段階的に移していく。
