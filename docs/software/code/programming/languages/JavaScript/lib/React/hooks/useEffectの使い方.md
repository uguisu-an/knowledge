window.addEventListener なんかも useEffect で扱うもの。
終了処理の段階で removeEventListener する。

NextJSだとuseEffectはクライアント側でしか実行されないので、windowが確定で使える。
useEffect以外の部分では、`typeof window !== 'undefined'`でガードする。

useEffectを扱うときは配列やオブジェクトに注意する。空配列やオブジェクトと初期化していたりすると同じに見えても違うので何度も実行されることがある。

命令的な書き方をするとどうしてもuseEffectは必要になる。
Hooksに閉じ込めたりしてうまいこと吸収すると宣言的な書き方になる。

useEffectとその補助としてのuseMemo, useCallback, useRefはセットみたいなとこがある。

useEffectから依存するなら、useMemoやuseCallbackで更新のタイミングを算出前のStateなどと合わせた方がいい。
元の関数や変数と同じように扱えるようになる。

配列やオブジェクトは再生成すると別物になってしまうので、useEffectで依存するならuseMemoを使わないといちいちuseEffectが発火してしまう。
特に`array ?? []`みたいな初期化してるとこはuseEffectで依存すると毎回違う配列として判定される。
