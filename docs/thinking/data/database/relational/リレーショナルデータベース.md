# RDB: リレーショナルデータベース

データベースのテーブルは整合性を保つために作る。

データベースの外部キーは整合性を保つためにつける。
整合性を保つ必要がなかったら、外部キーではなく単にインデックスでいい。

DB テーブルの違いは識別子の違い。

PKみたいな顔した変なカラムを作ると関連がわかりづらい。移行もしづらい。

RDBで保証される「整合性」は、各カラムの内容ではなく、各テーブルの関連。
各カラムの内容はアプリケーションで保証する必要がある。入力バリデーションとか、定期的な棚卸処理とか。

NOT NULLであっても空欄は許される。
しかし、外部キーを強制するとNOT NULLならそのテーブルのキーしか許されないので整合性が保証される。
関連を保証することで、間接的に内容を保証している例。

データベースで内容の整合性を保ちたいなら、同じようなデータでも整合性の条件が違うデータを別のデータとして扱うことも検討する。下書きと完成品とか。
