テストしないとリファクタリングはできない。
変更によって振る舞いが変わっていないかどうかを判別できるのはテストだけだ。

ただ、どうしてもテストできないなら、慎重にリファクタリングするしかない。
まずはテストできるようにする。

自動化できないだけならまずは手動でもいいので大きなテストを回せるようにする。
あとはリファクタリングしながら小さなテストを自動化して、段階的に大きなテストを分割していく。
