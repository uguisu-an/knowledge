内部品質の一種。

コード品質の影響を計画や時間の軸で計測した記事。
[コード品質はやはりビジネスに影響を与える - mtx2s’s blog](https://mtx2s.hatenablog.com/entry/2023/04/26/230917)

特に重要な指標が、「テストしやすさ」である。
コードの品質が高ければ、プロダクトの品質も高めやすくなる。

良いコードは、

- テストしやすい
- 生産性が高い
- メンテナンスコスト（変更するコスト）が低い
- 新しいメンバーが参加しやすい

悪いコードの例:

- テストがない
- ドキュメントがない
- 凝集していない
- 必要以上に結合している
- 可読性の悪いコード
- バグを誘発しやすい
- 機能追加しづらい
- 再利用性が悪い
- 実装方法が明らかにおかしい
- コードの意図がわからない
- 命名が適切ではない
- コードから仕様が理解しづらい
- コードだけではわからないところに一時変数やコメントがない
- 変数のスコープが広すぎる
- 長い
- 型の指定が緩い、汎用的すぎる
- 使われていないコード、コメントアウトされたコードが放置されている → @deprecatedを明示する
- 実は実装が仕様的に間違っているがそのまま放置

特に命名は重要。

- 誤字がある
- 名前が一貫していない
- 名前が業務の言葉と一致していない
- 名前が一般的・汎用的すぎる
- メソッド名に書かれた以上の働きをするメソッド
- 実際の働き以上のことをするかの如きメソッド名
- メソッド名に書かれたのと真逆のことをするメソッド
- 実際に格納されているよりも多くのものが含まれているかの如き識別子
- 実際に格納されているよりも含まれているものが少ないかの如き識別子
- 実際の格納されているものと真逆な識別子

クソコードは「動いてるからいいじゃん」と擁護されることもあるが、大抵は「動いてない」でだめ。
クソコードの最大の特徴はテストしにくいこと。十分にテストされていないことが多い。ただ、資金に余裕のある大企業で数十人使って動作確認するような余裕があればこの限りではない。
「動くように見える」だけではダメで、「動くのが検証できる」こと。

クソコードは素直に読んだ通りに動くとは限らないので、デバッガーが必要になる。
「クソコードは読むな、動かせ」
https://qiita.com/tonbi_attack/items/c7dff99c08c53888bd41

https://zenn.dev/gonta_ganbareyo/articles/b6943657f83915
https://zenn.dev/tonbi_attack/articles/f63734af40cd8d

https://qiita.com/kosuke-17/items/e5750ba01fc742a3b142

当初は良かったコードも、ドメインの理解が進んで概念の名前が変わったり分割されたりすると命名と一致しなくなることがある。

すべてのコードを改善しようとするべきではない。
まずはテストがあって、ちゃんと動くのが検証し続けられることが一番。

プログラマーは結局クソコードが好き。「はー！直さなきゃ！」ってなる。
嫌いなのは変更したらいけないクソコード。

そもそもの前提として、だいたいのクソコードはちゃんと動いてない。
しかし、実装が仕様になって、動いていることになっている場合もある。

汚いコードは依存関係が汚い。
まずは依存関係を整理しなくてもできる大きなテストを用意して、動かすことが重要。
デバッガーも助けになる。１行ずつ実行して依存関係を追っていく。

汚いコードは必要以上に複雑なので、記憶に頼らない。
メモやスケッチを活用する。

クソコードはまず動かすのが大変。

「良いコード」は「全部読まなくても意味が理解できるコード」だ。
逆に、コードが汚いと全部読んでようやく意味がわかるかどうか。場合によってはそれでも理解が困難。
