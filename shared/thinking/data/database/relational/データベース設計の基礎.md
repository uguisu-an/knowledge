1. 正規化する
2. 制約をつける
3. 処理の過程の（日付を持った）データを残す

https://qiita.com/k-hasegawa0321/items/51bb4d519ac9b304a595

RDBは一度SQLだけで操作してみるといい。
アプリで動かす前提だと扱いづらい設計になっているのを見つけられる。

UPDATEなしでどこまで操作できるか。

データベースのカラムにはできるだけコメントをつけて、何のためにあるか示した方がいい。日本語訳は要らない。

データベース上は異なるドメインのデータを同じ場所にまとめる場合もある。
たとえばユーザーのメールアドレスは、ログインに使ったり通知に使ったりする。
データベースで重要なのは整合性なので、一カ所にまとまってないと変更しづらい。変更しやすいように整理する。

データベースもネストは浅い方がいい。
例えば、
`作業 1..* 担当グループ 1..* 担当者`よりも、
`作業 1..* 担当者 *..1 担当グループ`の方が基本的には扱いやすい。
後者でも担当グループを使って作業に担当者を紐づければ担当グループを選ぶだけで済む。アプリケーション側で対処できる。
単一の担当グループしか作業の担当にならない場合でも、アプリケーション側で制御すればいい。

業務の要求は、データベースよりもアプリケーションで吸収した方が柔軟。
データベースよりもアプリケーションを変える方が簡単。

基本的には、業務の変更があった際にカラムを増やさなくていい程度に正規化した方がいい。
例えば、権限などを{system_a, system_b, system_c, ...}みたいにカラムで持つよりは、正規化して別のテーブルにしておけばデータを追加するだけで済む。

https://youtube.com/watch?v=di5zRn6b29Y&si=90FweUFNCvjeLTWi

- 一つのカラムには一つの値

DB設計の流れ

1. 画面や機能から必要なデータを洗い出して、テーブルの草案を考える。
2. （ローカルにデータベースを用意する。）
3. テーブルを作る。名前も重要。
4. 必要なカラムを洗い出して、名前と型を考える。
5. 外部キーやインデックスをつける。
6. 正規化を進める。テーブルを増やすこともあるので、テーブル設計に戻る。
7. （エクスポートして最初のマイグレーションファイルにする。）
